{% extends "base.html" %}
{% block content %}
<h1>{{name}}</h1>
{{description|markdown}}
<div class="row">
  <div class="col-md-6">
    <div class="clearfix">
      <h2 class="pull-left">
        {% if equal? %}
        Správná odpověď<i class="fa fa-check correct right" title="Správná odpověď" aria-hidden="true"></i>
        {% else %}
        Nesprávná odpověď<i class="fa fa-times incorrect right" title="Nesprávná odpověď" aria-hidden="true"></i>
        {% endif %}
      </h2>
      {% if not equal? %}
      <div class="pull-right">
        <button id="reveal-solution-button"
                data-toggle="modal"
                data-target="#confirm-reveal"
                type="button"
                class="btn btn-danger btn-sm">Prozradit řešení</button>
      </div>
      {% endif %}
    </div>
    {% if query.missing-required|not-empty %}
    <p>
      <i class="fa fa-question left" aria-hidden="true"></i>
      <strong>Chybějící konstrukty:</strong>
      {% for required in query.missing-required %}
      <code>{{required.label}}</code>{% ifequal forloop.counter forloop.length|dec %} a {% else %}{% if not forloop.last %}, {% endif %}{% endifequal %}
      {% endfor %}
    </p>
    {% endif %}
    {% if query.superfluous-prohibited|not-empty %}
    <p>
      <i class="fa fa-ban left" aria-hidden="true"></i>
      <strong>Zakázané konstrukty:</strong>
      {% for prohibited in query.superfluous-prohibited %}
      <code>{{prohibited.label}}</code>{% ifequal forloop.counter forloop.length|dec %} a {% else %}{% if not forloop.last %}, {% endif %}{% endifequal %}
      {% endfor %}
    </p>
    {% endif %}
  </div>
  <div class="col-md-6">
    <h2>Řešení</h2>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <textarea id="query" class="form-control" readonly rows="10">{{query.query}}</textarea>
  </div>
  <div class="col-md-6">
    <textarea id="canonical-query"
              class="form-control {% if not equal? %}invisible{% endif %}"
              readonly
              rows="10">{{canonical-query.query}}</textarea>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <h3>Výsledky</h3>
    <div id="query-results">
      <textarea id="results" class="hidden" data-type="{{query.results-type}}"> 
        {% safe %}
        {{query.results}}
        {% endsafe %}
      </textarea>
    </div>
  </div>
  <div class="col-md-6">
    <h3>Výsledky</h3>
    <div id="canonical-query-results">
      <textarea id="canonical-results" class="hidden" data-type="{{canonical-query.results-type}}">
        {% safe %}
        {{canonical-query.results}}
        {% endsafe %}
      </textarea>
    </div>
  </div>
</div>
<div class="modal fade"
  id="confirm-reveal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="Potvrdit prozrazení řešení"
  aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">Opravdu chcete prozradit řešení?</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Ne</button>
                <a id="reveal-solution" class="btn btn-danger btn-ok" data-dismiss="modal">Ano</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block page-scripts %}
{% script "/js/evaluation.js" %}
{% endblock %}
